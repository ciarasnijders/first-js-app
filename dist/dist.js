let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=20";function n(t){"object"==typeof t&&JSON.stringify(Object.keys(t))===JSON.stringify(["name","detailsUrl"])&&e.push(t)}function o(t){i(t).then(function(){!function(t,n,i){document.querySelector("#ModalTitle").innerText=t,document.querySelector("#pokemon-height").innerText=`height: ${n}`,document.querySelector("#pokemon-img").src=i;let r=document.querySelector("#modal-container");window.matchMedia("(max-width: 500px)").matches&&r.addEventListener("pointermove",()=>{const n=e.find(e=>e.name===t);let i=e.indexOf(n);i+1===e.length&&(i=-1);const r=e[i+1];o(r)})}(t.name,t.height,t.imageUrl)})}function i(e){r();let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){console.log({details:t}),c(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(e){c(),console.error(e)})}function r(){document.querySelector(".loading-message-container").innerText="Loading ..."}function c(){document.querySelector(".loading-message-container").innerText=""}function a(){let e=document.querySelector("#modal-container");e.classList.remove("is-visible"),console.log({modalContainer:e})}return window.addEventListener("keydown",e=>{let t=document.querySelector("#modal-container");"Escape"===e.key&&t.classList.contains("is-visible")&&a(),t.addEventListener("click",e=>{e.target===t&&a()})}),{getAll:function(){return e},add:n,addListItem:function(e){let t=document.querySelector("#pokemon-list"),n=document.createElement("button");n.classList.add("list-group-item","list-group-item-action"),n.setAttribute("type","button"),n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#Modal"),function(e,t){e.addEventListener("click",function(){o(t)})}(n,e),n.innerText=e.name,t.appendChild(n)},findByName:function(t){return e.filter(function(e){return e.name===t})},loadList:function(){return r(),fetch(t).then(e=>e.json()).then(function(e){c(),e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){c(),console.error(e)})},loadDetails:i}}();function pokemonLoopFunction(){pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})})}pokemonLoopFunction();